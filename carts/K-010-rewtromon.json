{
    "systemVersion":"0.3",
    "metadata":{
      "title":"K010 - Rewtromon",
      "centerTitle":"REWTROMON",
      "legalText":"(c)2024 by KesieV - www.kesiev.com/rewtro"
    },
    "systemConfiguration":[{"controllerModel":6}],
    "data":[{
         "id":"A",
         "images":[
            {"id":"graphics","image":{"data":{"_file":"graphics/rewtromon.png"},"format":"monocolor"}}
         ],
         "sprites":[
            {"id":"A","x":16,"y":0,"width":128,"height":144,"backgroundColor":8},
            {"id":"B","graphicsX":0,"graphicsY":148,"width":126,"height":20,"x":17,"y":18},
            {"id":"C","textColor":1,"text":"(A) NEW GAME","x":0,"y":112,"width":160,"height":8,"textAlignment":"center"},
            {"id":"D","textColor":1,"text":"(B) REMATCH","x":0,"y":120,"width":160,"height":8,"textAlignment":"center"},
            {"id":"E","flags":"C","graphicsX":147,"graphicsY":252,"width":20,"height":28,"x":20},
            {"id":"F","flags":"C","graphicsX":127,"graphicsY":280,"width":20,"height":28,"x":48},
            {"id":"G","flags":"C","graphicsX":147,"graphicsY":308,"width":20,"height":28,"x":76}
         ],
         "tilemaps":[
            {"map":["ABCDEFG"]}
         ],
         "sounds":[
            {"id":"Z","wave":"triangle","attack":7,"sustain":40,"decay":45,"release":127}
         ],
         "music":[
            {
               "id":"Z",
               "notes":[
                  ["---","---","---","---","---","C5-","C5-","C5-","E5-","---","C5-","E5-"]
               ],"instruments":"Z"
            },{
               "id":"X",
               "notes":[
                  ["A6-","---","A6-","---","A6-"]
               ],"instruments":"Z"
            }
         ],
      "songs":[
         {"id":"X","music":"X","tempo":3},
         {"id":"Z","music":"Z","tempo":2}
      ],
         "code":[
            {
               "when":[{"as":"scene","if":[{"itsAttribute":"timer","is":"==","_":0}]}],
               "then":[
                  {
                     "code":[
                        {
                           "when":[{"as":"game","if":[{"itsAttribute":"value0","is":"==","_":0}]}],
                           "then":[{
                              "id":"D",
                              "remove":true
                           }]
                        }
                     ]
                  }
               ]
            },
            {
            "then":[
               {
                  "flags":"C",
                  "sum":[
                     {
                        "x":[{"_":1}]
                     }
                  ],
                  "set":[{
                     "y":[{"attribute":"x","sin":true}]   
                  }]
               },{
                  "flags":"C",
                  "sum":[
                     {
                        "y":[{"_":19}]
                     }
                  ],
                  "multiply":[{
                     "y":[{"_":3}]
                  }]
               }
            ]
           },{
            "when":[{"flags":"C"}],
				"then":[	
               {
                  "code":[
                     {
                        "when":[{"if":[{"itsAttribute":"x","is":">=","_":160}]}],
                        "then":[
                           {
                              "set":[{
                                 "x":[{"_":-20}],
                                 "graphicsX":[{"list":[147,127],"randomValue":true}],
                                 "graphicsY":[{"list":[252,280,308,336,364,392,420],"randomValue":true}]
                              }]
                           }
                        ]
                     }
                  ]
               }
            ]
           },{
               "when":[{"as":"keyboard","attribute":"buttonA","if":[{"is":"hit"}]}],
               "then":[{"runScene":[{"_":"BD"}]}]
            },{
               "when":[{"as":"game","if":[{"itsAttribute":"value0","is":"==","_":1}]}],
               "then":[{
                  "code":[
                     {
                        "when":[{"as":"keyboard","attribute":"buttonB","if":[{"is":"hit"}]}],
                        "then":[{"runScene":[{"_":"X"}]}]
                     }
                  ]
               }]
            }
         ]
      },{
         "id":"B",
         "sprites":[
            {"id":"A","textColor":8,"text":"FIGHTER 1","x":0,"y":8,"textAlignment":"center","width":160,"height":8,"backgroundColor":5},
            {"id":"E","textColor":1,"text":"PRESS (A) AND SCAN~A REWTROMON CARD~QR-CODES","x":0,"y":24,"textAlignment":"center","width":160,"height":24},
            {"id":"B","backgroundColor":1,"textColor":8,"text":"PRESS (B) TO CANCEL","x":0,"y":136,"textAlignment":"center","width":160,"height":24},
            {"id":"C","graphicsX":147,"graphicsY":28,"width":20,"height":28,"x":70,"y":76,"scale":2},
            {"id":"D","graphicsX":127,"graphicsY":420,"width":20,"height":28,"x":90,"y":105,"scale":2,"backgroundColor":8},
            {"id":"F","graphicsX":56,"graphicsY":140,"width":16,"height":8,"x":41,"y":102,"animations":[
               {"frames":[0,1],"mode":"loop","speed":2}
            ],"animation":0}
         ],"tilemaps":[
            {"map":["ACDEBF"],"backgroundColor":8}
         ],
         "code":[
            {
               "when":[{"as":"keyboard","attribute":"buttonB","if":[{"is":"hit"}]}],
               "then":[{"runScene":[{"_":"A"}]}]
            },{
               "when":[{"as":"keyboard","attribute":"buttonA","if":[{"is":"hit"}]}],
               "then":[{
                  "scanCode":"RWM",
                  "scanCodeMap":[
                     {
                        "fromScene":"A",
                        "toScene":"X",
                        "sounds":"1133445566",
                        "images":[
                           {
                              "from":"graphics",
                              "to":"graphics0"
                           }
                        ],
                        "sprites":"112233445566"
                     }
                  ]
               }]
            },{
               "when":[{"as":"scene","attribute":"value9","if":[{"is":"==","_":1}]}],
               "then":[
                  {"runScene":[{"_":"CD"}]}
               ]
            }
         ]
      },{
         "id":"C",
         "sprites":[
            {"id":"A","textColor":8,"text":"FIGHTER 2","x":0,"y":8,"textAlignment":"center","width":160,"height":8,"backgroundColor":2}
         ],"tilemaps":[
            {"map":["ACDEBF"],"backgroundColor":8}
         ],
         "code":[
            {
               "when":[{"as":"keyboard","attribute":"buttonB","if":[{"is":"hit"}]}],
               "then":[{"runScene":[{"_":"B"}]}]
            },{
               "when":[{"as":"keyboard","attribute":"buttonA","if":[{"is":"hit"}]}],
               "then":[{
                  "scanCode":"RWM",
                  "scanCodeMap":[
                     {
                        "fromScene":"A",
                        "toScene":"X",
                        "sounds":"1A3C4D5E6F",
                        "images":[
                           {
                              "from":"graphics",
                              "to":"graphics1"
                           }
                        ],
                        "sprites":"AABB3C4D5E6F"
                     }
                  ]
               }]
            },{
               "when":[{"as":"scene","attribute":"value9","if":[{"is":"==","_":1}]}],
               "then":[
                  {"runScene":[{"_":"X"}]}
               ]
            }
         ]
      },{
        "id":"D",
        "code":[
         {
            "when":[{"as":"scene","if":[{"itsAttribute":"timer","is":"%%","_":50}]}],
            "then":[
               {
                  "id":"D",
                  "sum":[{
                     "x":[{"_":40}]
                  }] 
               },{
                  "id":"F",
                  "subtract":[{
                     "x":[{"_":62}]
                  }],
                  "set":[{
                     "flipX":[{"_":1}]
                  }]
               }
            ]
         },{
            "when":[{"as":"scene","if":[{"itsAttribute":"timer","is":"%%","_":100}]}],
            "then":[
               {
                  "id":"D",
                  "subtract":[{
                     "x":[{"_":80}]
                  }] 
               },{
                  "id":"F",
                  "sum":[{
                     "x":[{"_":124}]
                  }],
                  "set":[{
                     "flipX":[{"_":0}]
                  }]
               }
            ]
         }
        ] 
      },{
       "id":"X",
       "sounds":[],
       "images":[],
       "sprites":[
         {"id":"S","textColor":1,"text":"HP:","x":0,"y":8,"width":160},
         {"id":"T","textColor":1,"text":"HP:","x":80,"y":72,"width":160},

         {"id":"X","textColor":1,"x":8,"y":112,"width":144,"height":24},
         {"id":"Y","backgroundColor":5,"x":28,"y":10,"width":50,"height":4},
         {"id":"Z","backgroundColor":5,"x":108,"y":74,"width":50,"height":4},

         {"id":"H","graphicsX":0,"graphicsY":28,"width":8,"height":8,"x":0,"y":104},
         {"id":"I","graphicsX":8,"graphicsY":28,"width":8,"height":8},
         {"id":"J","graphicsX":0,"graphicsY":28,"width":8,"height":8,"flipX":true},
         {"id":"K","graphicsX":16,"graphicsY":28,"width":8,"height":8},
         {"id":"L","graphicsX":24,"graphicsY":28,"width":8,"height":8},
         {"id":"M","graphicsX":24,"graphicsY":28,"width":8,"height":8,"flipX":true},
         {"id":"N","graphicsX":32,"graphicsY":28,"width":8,"height":8},
         {"id":"O","graphicsX":40,"graphicsY":28,"width":8,"height":8},
         {"id":"P","graphicsX":48,"graphicsY":28,"width":8,"height":8},
         {"id":"Q","graphicsX":32,"graphicsY":28,"width":8,"height":8,"flipX":true},
         {"id":"R","graphicsX":48,"graphicsY":28,"width":8,"height":8,"flipX":true}
      ],
       "tilemaps":[
         {
            "map":["AB12STXYZ"],
            "backgroundColor":8
         },{
            "x":0,"y":104,
            "map":[
               "HIIIIIIIIIIIIIIIIIIJ",
               "K                  K",
               "K                  K",
               "K                  K",
               "LIIIIIIIIIIIIIIIIIIM"
            ],
            "song":"X"
         },{
            "x":0,"y":24,
            "map":[
               "NOOOOOOOOP"
            ]
         },{
            "x":80,"y":88,
            "map":[
               "ROOOOOOOOQ"
            ]
         }],
       "code":[
         {
            "when":[{"as":"scene","if":[{"itsAttribute":"timer","is":"==","_":0}]}],
				"then":[
               {
                  "as":"game",
                  "set":[
                     {
                        "value0":[{"_":1}]
                     }
                  ]
               },
               {
                  "id":"X",
                  "set":[
                     {
                        "text":[{"id":"1","attribute":"text","suffix":"~VS.~"}]
                     }
                  ],
                  "sum":[
                     {
                        "text":[{"id":"A","attribute":"text"}]
                     }
                  ]
               }
            ]
         },{
            "when":[{"as":"scene","if":[{"itsAttribute":"timer","is":"==","_":75}]}],
				"then":[
               {
                  "set":[{"value8":[{"_":0}]}]
               },
               {
                  "load":[{"_":"Y"}]
               }
            ]
         }
       ]
    },{
      "id":"Y",
      "code":[
         {
            "when":[{"as":"scene"}],
            "then":[
               {
                  "code":[
                     {
                        "when":[{"if":[{"itsAttribute":"value5","is":">","_":0}]}],
                        "then":[
                           {
                              "code":[
                                 {
                                    "when":[{"if":[{"itsAttribute":"value5","is":"%%","_":2}]}],
                                    "then":[
                                       {"attribute":"value2","sum":[{"x":[{"_":1}]}]}
                                    ],
                                    "else":[
                                       {"attribute":"value2","subtract":[{"x":[{"_":1}]}]}
                                    ]
                                 }
                              ]
                           },
                           {"subtract":[{"value5":[{"_":1}]}]}
                        ]
                     },{
                        "when":[{"if":[{"itsAttribute":"value6","is":">","_":0}]}],
                        "then":[
                           {"subtract":[{"value6":[{"_":1}]}]}
                        ],
                        "else":[
                           {"flags":"A","remove":true},
                           {
                              "code":[
                                 {
                                    "when":[{"id":"Y","if":[{"itsAttribute":"width","is":"<=","_":0}]}],
                                    "then":[
                                       {
                                          "id":"B",
                                          "set":[{"speedX":[{"_":20}]}]
                                       },
                                       {
                                          "id":"X",
                                          "set":[
                                             {
                                                "text":[{"id":"1","attribute":"text","suffix":"~WON!"}],
                                                "textColor":[{"_":1}]
                                             }
                                          ],
                                          "break":true,
                                          "playAudio":[{"_":"1"}],
                                          "load":[{"_":"Z"}]
                                       }
                                    ]
                                 },{
                                    "when":[{"id":"Z","if":[{"itsAttribute":"width","is":"<=","_":0}]}],
                                    "then":[
                                       {
                                          "id":"2",
                                          "set":[{"speedX":[{"_":-20}]}]
                                       },
                                       {
                                          "id":"X",
                                          "set":[
                                             {
                                                "text":[{"id":"A","attribute":"text","suffix":"~WON!"}],
                                                "textColor":[{"_":1}]
                                             }
                                          ],
                                          "break":true,
                                          "playAudio":[{"_":"A"}],
                                          "load":[{"_":"Z"}]
                                       }
                                    ]
                                 },{
                                    "when":[{"if":[{"itsAttribute":"value8","is":"==","_":0}]}],
                                    "then":[
                                       {"set":[{
                                          "value0":[{"id":"2"}],
                                          "value1":[{"id":"1","attribute":"text"}],
                                          "value2":[{"id":"B"}],
                                          "value3":[{"id":"Y"}],
                                          "value4":[{"id":"Z"}],
                                          "value7":[{"_":"3456","randomValue":true}],
                                          "value8":[{"_":1}],
                                          "value6":[{"_":50}]
                                       }]}
                                    ],
                                    "else":[
                                       {"set":[{
                                          "value0":[{"id":"B"}],
                                          "value1":[{"id":"A","attribute":"text"}],
                                          "value2":[{"id":"2"}],
                                          "value3":[{"id":"Z"}],
                                          "value4":[{"id":"Y"}],
                                          "value7":[{"_":"CDEF","randomValue":true}],
                                          "value8":[{"_":0}],
                                          "value6":[{"_":50}]
                                       }]}
                                    ]
                                 },{
                                    "then":[
                                       {
                                          "playAudio":[{"attribute":"value7"}]
                                       },
                                       {
                                          "spawn":[{"ids":[{"attribute":"value7"}]}],
                                          "set":[{
                                             "flags":[{"_":"A"}]
                                          }],
                                          "code":[
                                             {
                                                "when":[{"if":[{"itsAttribute":"value0","is":"==","_":1}]}],
                                                "then":[
                                                   {
                                                      "as":"scene",
                                                      "set":[
                                                         {
                                                            "value2":[{"attribute":"value0"}],
                                                            "value3":[{"attribute":"value4"}]
                                                         }
                                                      ]
                                                   }
                                                ]
                                             },{
                                                "then":[                                                  
                                                   {
                                                      "as":"scene",
                                                      "set":[{
                                                         "value5":[{"as":"that","attribute":"value1"}]
                                                      }],
                                                      "multiply":[{
                                                         "value5":[{"_":2}]
                                                      }]
                                                   },{
                                                      "id":"X",
                                                      "set":[
                                                         {
                                                            "text":[{"as":"scene","attribute":"value1","suffix":"~"}]
                                                         }
                                                      ],
                                                      "sum":[
                                                         {
                                                            "text":[{"as":"that","attribute":"value5"}]
                                                         }
                                                      ]
                                                   },{
                                                      "code":[
                                                         {
                                                            "when":[{"as":"scene","attribute":"value2"}],
                                                            "then":[
                                                               {
                                                                  "flags":"A",
                                                                  "set":[
                                                                     {
                                                                        "scale":[{"as":"that","attribute":"value0"}]
                                                                     }
                                                                  ],
                                                                  "placeAt":[{"as":"that"}]
                                                               }
                                                            ]
                                                         },
                                                         {
                                                            "when":[{"as":"scene","attribute":"value2","if":[{"itsAttribute":"value1","is":"==","flags":"A","attribute":"value3"}]}],
                                                            "then":[
                                                               {
                                                                  "as":"scene",
                                                                  "attribute":"value3",
                                                                  "sum":[
                                                                     {
                                                                        "width":[{"flags":"A","attribute":"value4"}]
                                                                     }
                                                                  ]
                                                               },{
                                                                  "id":"X",
                                                                  "set":[{
                                                                     "textColor":[{"_":5}]
                                                                  }]
                                                               }
                                                            ],
                                                            "else":[
                                                               {
                                                                  "as":"scene",
                                                                  "attribute":"value3",
                                                                  "sum":[
                                                                     {
                                                                        "width":[{"flags":"A","attribute":"value2"}]
                                                                     }
                                                                  ]
                                                               },{
                                                                  "id":"X",
                                                                  "set":[{
                                                                     "textColor":[{"_":1}]
                                                                  }]
                                                               }
                                                            ]
                                                         }
                                                      ]
                                                   },{
                                                      "as":"scene",
                                                      "attribute":"value3",
                                                      "set":[
                                                         {
                                                            "width":[{"attribute":"width","limit":[0,50]}]
                                                         }
                                                      ]
                                                   }
                                                ]
                                             }
                                          ]
                                       }
                                    ]
                                 }
                              ]
                           }
                        ]
                     }
                  ]
               }
            ]
         }
      ] 
   },{
      "id":"Z",
      "tilemaps":[{"song":"Z"}],
      "code":[
         {
            "when":[{"as":"keyboard","attribute":"buttonA","if":[{"is":"hit"}]}],
            "then":[{"runScene":[{"_":"A"}]}]
         }
      ]
   }]
 }